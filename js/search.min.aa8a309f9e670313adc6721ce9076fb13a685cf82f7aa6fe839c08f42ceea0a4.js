(function(){'use strict';const a=new FlexSearch({doc:{id:'id',field:['title','tags','content','date'],store:['title','summary','date','permalink']}});function c(c){const d=document.querySelector('template').content,a=document.createDocumentFragment(),b=document.querySelector('.search-results');b.textContent='';for(const b of c){const e=d.cloneNode(!0),f=e.querySelector('a'),g=e.querySelector('time'),h=e.querySelector('.content');f.innerHTML=b.title,f.href=b.permalink,g.innerText=b.date,h.innerHTML=b.summary,a.appendChild(e)}b.appendChild(a)}function b(){const b=document.querySelector('.search-text').value.trim(),d=a.search({query:b,limit:20});c(d)}function d(){const a=document.querySelector('.search-form');a.addEventListener('submit',function(a){a.preventDefault(),b()}),a.addEventListener('keyup',function(){b()}),document.querySelector('.search-loading').classList.add('hidden'),document.querySelector('.search-input').classList.remove('hidden'),document.querySelector('.search-text').focus()}function e(){document.querySelector('.search-loading').classList.remove('hidden'),fetch('/searchindex.json').then(function(a){return a.json()}).then(function(b){a.add(b)})}e(),d()})()